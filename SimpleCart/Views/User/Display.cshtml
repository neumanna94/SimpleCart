@{
  Layout = "_Layout";
}

<div class = "container">
  <div class = "row">
    <div class="col-md-12" id="resultCol">
      <form id="updateForm" action="User/Update/@ViewBag.sessionId" method="post">
        <h1>Greetings, @Model.GetName() <button type="button" class="btn updateButton"><span class="glyphicon glyphicon-cog"></span></button></h1>
        <h2>Username: @Model.GetLogin()</h2>
        <div class="form-group initHidden" id="nameGroup">
          <label for="nameInput">Name:</label>
          <input type="text" name="nameInput" id="nameInput" value="@Model.GetName()">
        </div>
        <h2>Password: @Model.GetPassword()  <button type="button" class="btn updateButton"><span class="glyphicon glyphicon-cog"></span></button></h2>
        <div class="form-group initHidden" id="passGroup">
          <label for="passInput">Password:</label>
          <input type="text" name="passInput" id="passInput">
          <label for="passInput2">Confirm Password:</label>
          <input type="text" name="passInput2" id="passInput2" value="@Model.GetPassword()">
        </div>
        <h2>Address: @Model.GetAddress() <button type="button" class="btn updateButton"><span class="glyphicon glyphicon-cog"></span></button></h2>
        <div class="form-group initHidden" id="addressGroup">
          <label for="addressInput">Address:</label>
          <input type="text" name="addressInput" id="addressInput" value="@Model.GetAddress()">
        </div>
        <h2>E-mail: @Model.GetEmail() <button type="button" class="btn updateButton"><span class="glyphicon glyphicon-cog"></span></button></h2>
        <div class="form-group initHidden" id="emailGroup">
          <label for="emailInput">E-mail:</label>
          <input type="text" name="emailInput" id="emailInput" value="@Model.GetEmail()">
        </div>
        <button type="submit" class="btn initHidden" id="update">Update</button>
      </form>
    </div>
  </div>
</div>


<script type="text/javascript">

  function isAnyButtonVisible(index){
    var updateButtons = $(".updateButton");
    var flag = false;
    $(".form-group").each(function(){
      if(!$(this).hasClass("hidden")){
        flag = true;
      };
    });
    return flag;
  };

  $(document).ready(function(){
    $(".initHidden").toggleClass("hidden");
    $(".updateButton").click(function(){
        var index = $(".updateButton").index(this);
        $(".form-group:eq(" + index + ")").toggleClass("hidden");
        $("#update").addClass("hidden");
        if (isAnyButtonVisible(index)){
          $("#update").removeClass("hidden");
        };
    });


  });
</script>
